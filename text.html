<!-- <!DOCTYPE html> -->
<html class="webkit chrome">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <title>Yuriqa Board - Agile Board - Jira</title>
    <link rel="stylesheet" href="./style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
</head>

<body id="jira" class="ghx-print-card-body" ng-app="printJiraApp">
    <div class="ghx-print-content-sizing ghx-print-small" id="Print-Section" ng-controller="mainController">
        <div class="ghx-card" ng-repeat="story in stories">
            <div class="ghx-card-content">
                <div class="ghx-card-header">
                    <div class="ghx-card-icon"><img ng-src="{{story.type | type}}">
                    </div>
                    <div class="ghx-card-icon"><img
                            src="https://yuriqa.atlassian.net/images/icons/priorities/medium.svg"></div>
                    <div class="ghx-card-key">YWA-{{story.id}}</div>
                    <div class="ghx-row-end"><img ng-src="{{story.owner | avatar}}" class="ghx-avatar-img"></div>
                </div>
                <div class="ghx-card-summary">{{story.title}}
                    <!-- <span class="ellipsis">â€¦</span><span class="obscurer"></span> -->
                </div>
                <div class="ghx-card-extra-fields">
                    <div class="ghx-card-xfield-row">
                        <div class="ghx-card-xfield-label">Story Points</div>
                        <div class="ghx-card-xfield-value">{{story.point}}</div>
                    </div>
                </div>
                <div class="ghx-card-footer"><span
                        class="aui-label ghx-label-6 ghx-card-lozenges-2">{{story.status | uppercase}}</span>
                    <div class="ghx-row-end">
                        <div class="aui-badge ghx-card-estimate ghx-card-estimate-2" style="text-transform: uppercase;">
                            {{ story.owner | uppercase}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <script>
        var app = angular.module('printJiraApp', []);
        app.controller("mainController", function ($scope, $http) {
            $http.get('./data.json').then(response => {
                $scope.stories = response.data;
            })
        });

        app.filter('avatar', function () {
            const USER = {
                NICK: {
                    name: 'NICK',
                    url: 'https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5be3fb6fa430e70fb00dfecd/c2d642a8-5ef0-4371-b230-00443443b7d5/128?size=48&s=48'
                },
                NAMT: {
                    name: 'NAMT',
                    url: 'https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5d39064d6508dd0c25fe3940/52a188ef-aeac-4d86-91d8-46eda6bf7228/128?size=48&s=48'
                },
                TOAN: {
                    name: 'TOAN',
                    url: 'https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5be3fb6fd9c83f0a32a117fa/44b02a36-e44e-4f8e-bc11-ee15aa133db6/128?size=48&s=48'
                }
            };
            return function (input) {
                switch (input.toUpperCase()) {
                    case USER.NICK.name:
                        return USER.NICK.url;
                    case USER.NAMT.name:
                        return USER.NAMT.url;
                    case USER.TOAN.name:
                        return USER.TOAN.url;
                }
            }
        });

        app.filter('type', function () {
            const type = {
                STORY: {
                    name: 'STORY',
                    url: 'https://yuriqa.atlassian.net/secure/viewavatar?size=medium&avatarId=10315&avatarType=issuetype'
                },
                BUG: {
                    name: 'BUG',
                    url: 'https://yuriqa.atlassian.net/secure/viewavatar?size=medium&avatarId=10303&avatarType=issuetype'
                }
            };
            return function (input) {
                switch (input.toUpperCase()) {
                    case type.STORY.name:
                        return type.STORY.url;
                    case type.BUG.name:
                        return type.BUG.url;
                }
            }
        });


        // 
    </script>
</body>

</html>